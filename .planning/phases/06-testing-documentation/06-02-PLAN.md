---
phase: 06-testing-documentation
type: execute
---

<objective>
Configure ZSH autocomplete and create comprehensive documentation for public release.

Purpose: Provide professional user experience with tab completion and clear setup/usage instructions.
Output: Working ZSH autocomplete, comprehensive README with examples, project ready for public release.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-testing-documentation/06-RESEARCH.md
@.planning/phases/06-testing-documentation/06-01-SUMMARY.md
@.planning/phases/05-configuration-templates/05-01-SUMMARY.md
@src/npm_cli/__main__.py
@src/npm_cli/cli/proxy.py
@src/npm_cli/cli/cert.py
@src/npm_cli/cli/config.py
@src/npm_cli/templates/nginx.py
@pyproject.toml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure ZSH autocomplete via Typer built-in completion</name>
  <files>src/npm_cli/__main__.py, README.md (add installation section)</files>
  <action>
    Typer provides built-in completion via --install-completion and --show-completion commands (per RESEARCH.md - do NOT hand-roll custom completion scripts).

    Verify main app in __main__.py has completion enabled by checking Typer(add_completion=True) or that it's using default (completion enabled by default in Typer 0.12+). If not explicitly set, add add_completion=True to the Typer() constructor.

    Test completion installation manually: `uv run npm-cli --install-completion zsh` to install, then restart shell and test `npm-cli <TAB>` shows subcommands. Verify `npm-cli proxy <TAB>` shows proxy subcommands.

    Document completion installation in README.md under "Installation" section: Add step to run `npm-cli --install-completion zsh` after installation, note that shell restart is required, mention that completion works for commands and options.

    Do NOT create custom completion scripts - Typer generates them automatically and handles updates per RESEARCH.md. The Literal type hints in templates/nginx.py already provide template name completion for free.
  </action>
  <verify>Run `npm-cli --install-completion zsh`, restart shell, verify `npm-cli <TAB>` shows subcommands (proxy, cert, config, version), `npm-cli proxy <TAB>` shows proxy commands (list, create, update, delete, show, template)</verify>
  <done>ZSH completion installs successfully, tab completion works for all commands and subcommands, installation documented in README</done>
</task>

<task type="auto">
  <name>Task 2: Write comprehensive README with setup and usage guide</name>
  <files>README.md</files>
  <action>
    Replace the empty README.md with comprehensive documentation for public release. Follow structure from RESEARCH.md (Simon Willison CLI tool best practices):

    **Sections to include:**

    1. **Project Title and Description** - "NPM CLI - Nginx Proxy Manager Command-Line Tool" with one-line value proposition from PROJECT.md

    2. **Features** - Bullet list highlighting core trinity: proxy host management with templates, SSL certificate automation, configuration templates (Authentik, VPN, API bypass, WebSocket)

    3. **Installation** -
       - Prerequisites: Python 3.11+, uv installed
       - Install with `uv tool install npm-cli` (or `uv pip install npm-cli` in venv)
       - ZSH completion: `npm-cli --install-completion zsh` + shell restart
       - Environment setup: NPM_HOST, NPM_PORT, NPM_EMAIL, NPM_PASSWORD or token caching

    4. **Quick Start** -
       - Connect to NPM: `npm-cli connect` (discovers Docker container or uses env vars)
       - Authenticate: `npm-cli auth` (caches token)
       - Check status: `npm-cli status`
       - List proxies: `npm-cli proxy list`

    5. **Usage Examples** -
       - Create proxy with SSL: `npm-cli proxy create --domain example.com --forward-host 192.168.1.100 --forward-port 8080` then `npm-cli cert attach --domain example.com`
       - Apply Authentik template: `npm-cli proxy template apply <proxy-id> authentik --backend http://app:3000`
       - Apply API bypass template: `npm-cli proxy template apply <proxy-id> api-bypass --path "^~ /api/webhooks"`
       - List certificates: `npm-cli cert list`
       - Show proxy details: `npm-cli proxy show example.com` (domain-based lookup)

    6. **Template Reference** - Table of available templates (authentik, api-bypass, vpn-only, websocket, authentik-bypass) with descriptions and required options from templates/nginx.py docstrings

    7. **Configuration** - Environment variables (NPM_HOST, NPM_PORT, NPM_EMAIL, NPM_PASSWORD), .env file support, token caching location (~/.config/npm-cli/token)

    8. **Development** - How to run tests (`uv run pytest`), how to run linting (`uv run ruff check src/`), project structure overview

    9. **Testing** - Note about reproducible test suite with dedicated NPM container, how to run integration tests

    10. **Architecture** - Brief overview: Python 3.11+ with uv, Typer CLI framework, Pydantic models, httpx for API calls, Rich for output, API-first approach (no direct database access)

    11. **License and Contributing** - Standard sections (MIT license if applicable, contribution guidelines)

    Use clear, concise language. Include code examples with actual command syntax. Make installation and quick start copy-pasteable. Reference actual CLI output format (Rich tables) where helpful.
  </action>
  <verify>README.md exists with all sections, all command examples are valid syntax, quick start is copy-pasteable, template reference matches actual templates in templates/nginx.py</verify>
  <done>README.md is comprehensive (covers installation, usage, examples, templates, configuration, development), copy-pasteable commands, ready for public release</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] ZSH completion installs without errors
- [ ] Tab completion works for all commands after shell restart
- [ ] README.md exists and is comprehensive (>200 lines)
- [ ] All command examples in README use valid syntax
- [ ] Quick start section is copy-pasteable
- [ ] Template reference matches actual templates in code
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- ZSH completion working for all commands
- README comprehensive and public-release ready
- Phase 6 complete - project ready for public release
  </success_criteria>

<output>
After completion, create `.planning/phases/06-testing-documentation/06-02-SUMMARY.md`:

# Phase 6 Plan 2: Documentation & Completion Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `README.md` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 6 complete - project ready for public release
</output>
