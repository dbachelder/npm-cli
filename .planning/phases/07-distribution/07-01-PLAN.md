---
phase: 07-distribution
type: execute
---

<objective>
Package npm-cli and publish to PyPI for public distribution.

Purpose: Make the tool publicly available for installation via `uv tool install npm-cli` or `pip install npm-cli`.
Output: Published package on PyPI, git tag for release, complete package metadata.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@pyproject.toml
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Prepare package metadata and licensing</name>
  <files>pyproject.toml, LICENSE</files>
  <action>
    Update pyproject.toml with complete package metadata:
    - description: "Command-line tool for managing Nginx Proxy Manager via API"
    - classifiers: Add appropriate PyPI classifiers (Programming Language :: Python :: 3.11+, Development Status :: 4 - Beta, Intended Audience :: System Administrators, Topic :: System :: Systems Administration)
    - keywords: ["nginx", "proxy-manager", "npm", "cli", "docker", "ssl", "certificate"]
    - urls: Add project_urls for homepage, repository, issues, documentation
    - license: Verify license field matches LICENSE file

    Create LICENSE file with MIT License (standard for Python CLI tools). Include copyright year 2026 and author name from pyproject.toml authors field.

    Verify all required metadata fields are present: name, version, description, readme, authors, requires-python, dependencies, project.scripts.
  </action>
  <verify>pyproject.toml has all required fields, LICENSE file exists with MIT license, `uv build --check` validates metadata (or equivalent validation)</verify>
  <done>Package metadata complete, LICENSE file present, pyproject.toml valid for PyPI submission</done>
</task>

<task type="auto">
  <name>Task 2: Build and verify package locally</name>
  <files>dist/ (output directory)</files>
  <action>
    Build the package with uv:
    - Run `uv build` to create wheel (.whl) and source distribution (.tar.gz) in dist/
    - Verify dist/ contains both npm_cli-0.1.0-py3-none-any.whl and npm_cli-0.1.0.tar.gz (version may differ)
    - Check package contents: `tar -tzf dist/npm_cli-*.tar.gz` should include src/npm_cli/, README.md, LICENSE, pyproject.toml

    Test local installation:
    - Create test venv: `uv venv test-install`
    - Install from wheel: `uv pip install dist/npm_cli-*.whl --python test-install/bin/python`
    - Verify CLI works: `test-install/bin/npm-cli --help` shows help output
    - Verify version: `test-install/bin/npm-cli version` shows correct version
    - Clean up: `rm -rf test-install`

    If build or installation fails, fix issues before proceeding (missing files in package, incorrect entry points, etc.).
  </action>
  <verify>`uv build` succeeds, dist/ contains .whl and .tar.gz, test installation works, `npm-cli --help` and `npm-cli version` both work from test install</verify>
  <done>Package builds successfully, contains all necessary files, installs correctly, CLI commands work</done>
</task>

<task type="auto">
  <name>Task 3: Publish to PyPI and tag release</name>
  <files>N/A (publishing operation)</files>
  <action>
    Publish to PyPI:
    - Run `uv publish` to upload package to PyPI (will prompt for PyPI credentials or use token from PYPI_TOKEN env var)
    - If authentication fails, inform user to set up PyPI credentials (create account at pypi.org, generate API token, configure in ~/.pypirc or set PYPI_TOKEN env var)
    - After successful publish, verify package appears at https://pypi.org/project/npm-cli/

    Tag git release:
    - Create git tag: `git tag -a v0.1.0 -m "Release v0.1.0 - Initial public release"`
    - Push tag: `git push origin v0.1.0`

    Note: If `uv publish` is not available or fails, fallback to `twine upload dist/*` (after `uv pip install twine`).
  </action>
  <verify>Package visible at https://pypi.org/project/npm-cli/, git tag v0.1.0 exists and pushed to remote, `uv tool install npm-cli` works from PyPI (test in fresh environment)</verify>
  <done>Package published to PyPI, installable via `uv tool install npm-cli`, git release tagged v0.1.0</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] pyproject.toml has complete metadata with classifiers, keywords, urls
- [ ] LICENSE file exists (MIT)
- [ ] Package builds successfully with `uv build`
- [ ] Package installs and CLI works from local build
- [ ] Package published to PyPI and visible at https://pypi.org/project/npm-cli/
- [ ] Git tag v0.1.0 created and pushed
- [ ] Fresh install via `uv tool install npm-cli` works
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Package available on PyPI for public installation
- Git release tagged
- Phase 7 complete - npm-cli publicly distributed
</success_criteria>

<output>
After completion, create `.planning/phases/07-distribution/07-01-SUMMARY.md`:

# Phase 7 Plan 1: Package and Publish to PyPI Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `pyproject.toml` - Description
- `LICENSE` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 7 complete - npm-cli v0.1.0 publicly available on PyPI
</output>
